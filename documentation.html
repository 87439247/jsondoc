---
layout: default
title: Documentation
---

<h3>Annotate your code</h3>
<table class="table">
	<thead>
		<tr>
			<th>Annotation</th>
			<th>Level</th>
			<th>Description</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td><code>@Api</code></td>
			<td>Class</td>
			<td>
				<p>This annotation has to be used on your controller class in an MVC pattern. It describes in a few words what the API does</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiMethod</code></td>
			<td>Method</td>
			<td>
				<p>This annotation describes your exposed methods in a generic way: which verb has to be used, which is the path for the call, which type it accepts, which one produces, etc</p>
			</td>
		</tr>			
		<tr>
			<td><code>@ApiVersion</code></td>
			<td>Class,Method,Field</td>
			<td>
				<p>This annotation lets you specify since and until which version the class, method, object or field is supported</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiAuthNone</code></td>
			<td>Class,Method</td>
			<td>
				<p>Annotate a class or method with this annotation to specify that it does not require authentication to be accessed</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiAuthBasic</code></td>
			<td>Class,Method</td>
			<td>
				<p>Annotate a class or method with this annotation to specify that it requires Basic Authentication to be accessed. You must also specify roles that can access the method and a list of <code>@ApiAuthBasicUser</code> test users</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiAuthBasicUser</code></td>
			<td>Annotation</td>
			<td>
				<p>This annotation is used inside <code>@ApiAuthBasic</code> to specify test users' username and password</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiHeaders</code></td>
			<td>Method</td>
			<td>
				<p>This annotation contains all the useful information to insert in the call headers. It is just a container for the following annotation, which describes headers in detail</p>
			</td>
		</tr>															
		<tr>
			<td><code>@ApiHeader</code></td>
			<td>Annotation</td>
			<td>
				<p>This annotation has to be used inside an annotation of type <code>@ApiHeaders</code></p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiParams</code></td>
			<td>Method</td>
			<td>
				<p>This annotation contains a list of <code>@ApiParam</code> annotations. It's possible to use it at method level, enabling writing documentation for old style servlets in which methods' signatures did not allow explicit parameter specification</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiParam</code></td>
			<td>Annotation, Parameter</td>
			<td>
				<p>This annotation describes the parameters to be passed to the method</p>
			</td>
		</tr>					
		<tr>
			<td><code>@ApiBodyObject</code></td>
			<td>Parameter</td>
			<td>
				<p>This annotation has to be used on your method and represents the parameter passed in the body of the requests</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiResponseObject</code></td>
			<td>Method</td>
			<td>
				<p>This annotation has to be used on your method and represents the returned object</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiErrors</code></td>
			<td>Method</td>
			<td>
				<p>This annotation has to be used on your method and represents the possible errors returned by the method</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiError</code></td>
			<td>Annotation</td>
			<td>
				<p>This annotation is to be used inside an annotation of type <code>@ApiErrors</code> and describes the error code and the error message for the returned error</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiObject</code></td>
			<td>Class</td>
			<td>
				<p>This annotation is to be used on your object classes and represents an object used for communication between clients and server</p>
			</td>
		</tr>
		<tr>
			<td><code>@ApiObjectField</code></td>
			<td>Field</td>
			<td>
				<p>This annotation is to be used on your objects' fields and represents a field of an object</p>
			</td>
		</tr>
	</tbody>
</table>

<h3 class="spaced">Generate the documentation</h3>
<h4>Using Spring MVC</h4>
				<p>If your web application already uses Spring MVC, then it's easy: the project <code>jsondoc-springmvc</code> already does it for you. The only thing to do on your side is to declare the jsondoc controller in your spring context.xml file:</p>
{% highlight xml %}
<mvc:annotation-driven />
<context:component-scan base-package="your.base.package" />
 
<bean id="documentationController" class="org.jsondoc.springmvc.controller.JSONDocController">
	<property name="version" value="1.0" />
	<property name="basePath" value="http://localhost:8080/api" />
	<property name="packages">
		<list>
			<value>com.mycompany.controller</value> <!-- put here packages in which you have your spring controllers -->
			<value>com.mycompany.pojo</value> <!-- put here packages in which you have your objects -->
			<value>org.external.stuff</value> <!-- they can also belong to external jars: provide here their package -->
		</list>
	</property>
</bean>
{% endhighlight %}

<p>In this case the documentation will be generated at <code>http://localhost:8080/api/jsondoc</code>. You only have to specify the api version and the base path to give you readers a better information.</p>

<div class="alert alert-info">
Change the <strong>base path</strong> of your web application, or better put a placeholder here and in the pom.xml and filter this file to have it replaced for free for different environments
</div>

<div class="alert alert-warning">
In the <strong>packages</strong> list property you should put packages that contain spring controllers and objects needed for the documentation generation, as far as they are on the classpath. The scan is <strong>recursive</strong>.
</div>

<h4>Starting from scratch</h4>
<p>You can use your favourite MVC framework with JSONDoc. In this case you should only include <code>jsondoc-core</code> and use <code>JSONDocUtils</code> static class to generate an object of kind <code>JSONDoc</code> that can be later marshalled in JSON with your favourite marshaller. Here is the code of the Spring MVC controller, maybe you will find it useful:</p>
{% highlight java %}
package org.jsondoc.springmvc.controller;
 
import org.jsondoc.core.pojo.JSONDoc;
import org.jsondoc.core.util.JSONDocUtils;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;
 
@Controller
@RequestMapping(value = "/jsondoc")
public class JSONDocController {
	private String version;
	private String basePath;
	private List<String>packages;
	 
	public void setVersion(String version) {
		this.version = version;
	}
	 
	public void setBasePath(String basePath) {
		this.basePath = basePath;
	}

	public void setPackages(List<String> packages) {
		this.packages = packages;
	}
	 
	@RequestMapping(method = RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)
	public @ResponseBody
	JSONDoc getApi() {
		return JSONDocUtils.getApiDoc(servletContext, version, basePath, List<String> packages);
	}
 
}
{% endhighlight %}

<h3 class="spaced">Display the generated docs</h3>
<h4>With jsondoc-ui</h4>
<p>You can include the <code>jsondoc-ui</code> project in your web application. This provides an interface to browse the generated documentation and a playground to test methods. It is built on Twitter Bootstrap and can be easily customized for you needs. Check out the <a href="{{ site.demourl }}" target="_blank">live demo here.</a></p>
<h4>Build your own viewer</h4>
<p>If you are not satisfied with the standard interface, you can use the generated JSON documentation in a fully customized interface!</p>

<script type="text/javascript">
	$('#documentation').addClass('active');
</script>