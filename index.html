<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>JSONDoc | Easily generate documentation for your RESTful API and quick test API methods</title>
	<meta name="description" content="">
	<meta name="author" content="Fabio Maffioletti">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->

      <!-- Le styles -->
      <link href="css/bootstrap.min.css" rel="stylesheet">
      <link href="css/font-awesome.css" rel="stylesheet">
      <link href='http://fonts.googleapis.com/css?family=Hammersmith+One|Oswald' rel='stylesheet' type="text/css" />
      <link rel="stylesheet" type="text/css" href="css/jquery.lightbox-0.5.css" media="screen" />
      <link href="css/prettify.css" rel="stylesheet" />
      <link href='http://fonts.googleapis.com/css?family=Viga' rel='stylesheet' type='text/css'>

      <style type="text/css">
      /* Override some defaults */
      html, body {
      	background-color: #eee;
      	background-image: url('img/classy_fabric.png');
      }
      body {
      	padding-top: 20px; /* 40px to make the container go all the way to the bottom of the topbar */
      	padding-bottom: 20px;
      	font-size: 12px;
      }

      .container {
      	width: 940px;
      }

      .container > footer p {
      	text-align: center; /* center align it with the container */
      }

      footer {
      	padding-top: 10px;
      	border-top: 7px solid #eee;
      }

      /* The white background content wrapper */
      .content {
      	background-color: #fff;
      	padding: 20px;
      	margin: 0 -20px; /* negative indent the amount of the padding to maintain the grid system */
      }

      .topbar .btn {
      	border: 0;
      }

      section {
      	padding-top: 20px;
      }

      h1, h2, h3, h4 {
      	/*font-family: 'Hammersmith One', sans-serif;*/
      	/*font-family: 'Oswald', sans-serif;*/
      	font-family: 'Viga', sans-serif;
      }

      h2, h3, h4 {
      	color: #444;
      }

      p {
      	font-family: Arial,Helvetica,sans-serif;
      	font-size: 12px;	
      }

      .span10 {
      	width: 940px;
      }

      </style>

      <link rel="icon" href="img/favicon.ico" type="image/x-icon" />
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
      <script type="text/javascript" src="js/jquery.lightbox-0.5.min.js"></script>
      <script type="text/javascript" src="js/bootstrap.min.js"></script>
      <script type="text/javascript" src="js/prettify.js"></script>
  </head>

  <body onload="prettyPrint()">

  	<div class="container">

  		<div class="content">

  			<section style="padding-top: 0px; padding-bottom: 10px; border-bottom: 7px solid #eee;">
  				<div class="row">
  					<div class="span7" style="border-right: 1px solid #eee;">
  						<h1 style="font-size: 48px; margin-bottom: 5px;">JSONDoc</h1>
  						<h3>easily generate docs and playground for your RESTful API</h3>
  					</div>
  					<div class="span2">
  						<h3>Contact me</h3>
  						<ul class="unstyled">
  							<li><i class="icon-envelope-alt"></i> <a href="mailto:fabio.maffioletti@gmail.com" target="blank">Email</a></li>
							<li><i class="icon-globe"></i> <a href="http://fabio-maffioletti.appspot.com" target="blank">Personal website</a></li>
  						</ul>
  					</div>
  				</div>
  			</section>

  			<section>
  				<div class="row">
  					<div class="span10">
						<ul class="nav nav-tabs">
						    <li class="active"><a href="#annotate" data-toggle="tab"><code>{1} annotate</code></a></li>
						    <li><a href="#generate" data-toggle="tab"><code>{2} generate</code></a></li>
						    <li><a href="#display" data-toggle="tab"><code>{3} display</code></a></li>
						    <li><a href="#examples" data-toggle="tab"><code>examples</code></a></li>
						    <li><a href="#gettingstarted" data-toggle="tab"><code>getting started</code></a></li>
						    <li><a href="#downloads" data-toggle="tab"><code>downloads</code></a></li>
						    <li class="pull-right"><a href="http://jsondoc.eu01.aws.af.cm/jsondoc.jsp" target="blank"><code>demo</code></a></li>
					    </ul>

					    <div class="tab-content">
							
							<div id="annotate" class="tab-pane fade active in">
								<h2>Step 1: annotate your code!</h2>
		  						<p>JSONDoc has a set of completely <em>MVC framework agnostic</em> annotations. Here is the list:</p>
		  						<table class="table table-bordered table-condensed">
		  							<tr>
		  								<th style="width: 15%">Annotation</th>
		  								<th style="width: 10%">Level</th>
		  								<th>Description</th>
		  							</tr>
		  							<tr>
		  								<td><code>@Api</code></td>
		  								<td>Class</td>
		  								<td>
		  									<p>This annotation has to be used on your controller class in an MVC pattern. It describes in a few words what the API does</p>
		  								</td>
		  							</tr>
		  							<tr>
		  								<td><code>@ApiMethod</code></td>
		  								<td>Method</td>
		  								<td>
		  									<p>This annotation describes your exposed methods in a generic way: which verb has to be used, which is the path for the call, which type it accepts, which one produces, etc</p>
		  								</td>
		  							</tr>			
		  							<tr>
		  								<td><code>@ApiHeaders</code></td>
		  								<td>Method</td>
		  								<td>
		  									<p>This annotation contains all the useful information to insert in the call headers. It is just a container for the following annotation, which describes headers in detail</p>
		  								</td>
		  							</tr>															
		  							<tr>
		  								<td><code>@ApiHeader</code></td>
		  								<td>Annotation</td>
		  								<td>
		  									<p>This annotation has to be used inside an annotation of type <code>@ApiHeaders</code></p>
		  								</td>
		  							</tr>
		  							<tr>
		  								<td><code>@ApiParam</code></td>
		  								<td>Parameter</td>
		  								<td>
		  									<p>This annotation describes the parameters to be passed to the method</p>
		  								</td>
		  							</tr>					
		  							<tr>
		  								<td><code>@ApiBodyObject</code></td>
		  								<td>Parameter</td>
		  								<td>
		  									<p>This annotation has to be used on your method and represents the parameter passed in the body of the requests</p>
		  								</td>
		  							</tr>
		  							<tr>
		  								<td><code>@ApiResponseObject</code></td>
		  								<td>Method</td>
		  								<td>
		  									<p>This annotation has to be used on your method and represents the returned object</p>
		  								</td>
		  							</tr>
		  							<tr>
		  								<td><code>@ApiErrors</code></td>
		  								<td>Method</td>
		  								<td>
		  									<p>This annotation has to be used on your method and represents the possible errors returned by the method</p>
		  								</td>
		  							</tr>
		  							<tr>
		  								<td><code>@ApiError</code></td>
		  								<td>Annotation</td>
		  								<td>
		  									<p>This annotation is to be used inside an annotation of type <code>@ApiErrors</code> and describes the error code and the error message for the returned error</p>
		  								</td>
		  							</tr>
		  							<tr>
		  								<td><code>@ApiObject</code></td>
		  								<td>Class</td>
		  								<td>
		  									<p>This annotation is to be used on your object classes and represents an object used for communication between clients and server</p>
		  								</td>
		  							</tr>
		  							<tr>
		  								<td><code>@ApiObjectField</code></td>
		  								<td>Field</td>
		  								<td>
		  									<p>This annotation is to be used on your objects' fields and represents a field of an object</p>
		  								</td>
		  							</tr>
		  						</table>
							</div>

							<div id="generate" class="tab-pane fade">
								<h2>Step 2: generate the documentation!</h2>
		  						<h3>Using Spring MVC</h3>
		  						<p>If your web application already uses Spring MVC, then it's easy: the project <strong>jsondoc-springmvc</strong> already does it for you. The only thing to do on your side is to declare the jsondoc controller in your spring context.xml file:</p>
<pre class="prettyprint linenums">
&lt;mvc:annotation-driven /&gt;
&lt;context:component-scan base-package="your.base.package" /&gt;

&lt;bean id="documentationController" class="org.jsondoc.springmvc.controller.JSONDocController"&gt;
	&lt;property name="version" value="1.0" /&gt;
	&lt;property name="basePath" value="http://localhost:8080/api" /&gt;
	&lt;!-- change the base path of your web application, or better put a placeholder here and in the pom.xml and filter this file to have if replaced for free for different environments --&gt;
	&lt;property name="packages"&gt;
		&lt;list&gt;
			&lt;value&gt;com.mycompany.controller&lt;/value&gt; &lt;!-- put here packages in which you have your spring controllers --&gt;
			&lt;value&gt;com.mycompany.pojo&lt;/value&gt; &lt;!-- put here packages in which you have your objects --&gt;
			&lt;value&gt;org.external.stuff&lt;/value&gt; &lt;!-- they can also belong to external jars: provide here their package --&gt;
		&lt;/list&gt;
	&lt;/property&gt;
&lt;/bean&gt;
</pre>
								<p>In this case the documentation will be generated at <code>http://localhost:8080/api/jsondoc</code>. You only have to specify the api version and the base path to give you readers a better information.</p>
 
								<h3>Starting from scratch</h3>
								<p>You can use your favourite MVC framework with JSONDoc. In this case you should only include <strong>jsondoc-core</strong> and use <code>JSONDocUtils</code> static class to generate an object of kind <code>JSONDoc</code> that can be later marshalled in JSON with your favourite marshaller. Here is the code of the Spring MVC controller, maybe you will find it useful: </p>
<pre class="prettyprint linenums">
package org.jsondoc.springmvc.controller;

import org.jsondoc.core.pojo.JSONDoc;
import org.jsondoc.core.util.JSONDocUtils;
import org.springframework.http.MediaType;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequestMapping(value = "/jsondoc")
public class JSONDocController {
	private String version;
	private String basePath;

	public void setVersion(String version) {
		this.version = version;
	}

	public void setBasePath(String basePath) {
		this.basePath = basePath;
	}

	@RequestMapping(method = RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)
	public @ResponseBody
	JSONDoc getApi() {
		return JSONDocUtils.getApiDoc(servletContext, version, basePath, List&lt;String&gt; packages) { 
	}

}</pre>
							</div>


							<div id="display" class="tab-pane fade">
								<h2>Step 3: display the generated docs!</h2>
								<h3>With jsondoc-ui</h3>
								<p>You can include the <strong>jsondoc-ui</strong> project in your web application. 
								This provides an interface to browse the generated documentation and a playground to test methods. 
								It is built on Twitter Bootstrap and can be easily customized for you needs. 
								Check out the <a href="http://jsondoc.eu01.aws.af.cm/jsondoc.jsp" target="blank">live demo here</a>.</p>

								<h3>Build your own viewer</h3>
								<p>If you are not satisfied with the standard interface, you can use the generated JSON documentation in a fully customized interface!</p>
							</div>

							<div id="examples" class="tab-pane fade">
								<h2>Examples</h2>
<h3>Api</h3>
<pre class="prettyprint linenums">
package org.jsondoc.sample.controller;

import org.jsondoc.core.annotation.Api;

@Api(name="city services", description="Methods for managing cities")
// mvc framework annotations ommited
public class CityApi {</pre>

<h3>Exposed method</h3>
<pre class="prettyprint linenums">
package org.jsondoc.sample.controller;

import org.jsondoc.core.annotation.ApiError;
import org.jsondoc.core.annotation.ApiErrors;
import org.jsondoc.core.annotation.ApiMethod;
import org.jsondoc.core.annotation.ApiParam;
import org.jsondoc.core.annotation.ApiResponseObject;
import org.jsondoc.core.pojo.ApiVerb;

// class declaration

@ApiMethod(
	path="/city/get/{name}", 
	verb=ApiVerb.GET, 
	description="Gets a city with the given name, provided that the name is between sydney, melbourne and perth",
	produces={MediaType.APPLICATION_JSON_VALUE},
	consumes={MediaType.APPLICATION_JSON_VALUE}
)
@ApiHeaders(headers={
	@ApiHeader(name="api_id", description="The api identifier")
})
@ApiErrors(apierrors={
	@ApiError(code="2000", description="City not found"),
	@ApiError(code="9000", description="Illegal argument")
})
// mvc framework annotations ommited
public @ApiResponseObject City getCityByName(@ApiParam(name="name", description="The city name", allowedvalues={"Melbourne", "Sydney", "Perth"}) String name) {
	// Here goes the method implementation
}</pre>

<h3>Object to be documented</h3>
<pre class="prettyprint linenums">
package org.jsondoc.sample.pojo;

import org.jsondoc.core.annotation.ApiObject;
import org.jsondoc.core.annotation.ApiObjectField;

@ApiObject(name = "city")
public class City extends Location {

	@ApiObjectField(description = "The name of the city")
	private String name;

	public City(String name) {
		super();
		this.name = name;
	}
	
	public String getName() {
		return name;
	}

}</pre>

<h3>Object that won't be shown but will be considered in building documentation</h3>
<pre class="prettyprint linenums">
package org.jsondoc.sample.pojo;

import org.jsondoc.core.annotation.ApiObject;
import org.jsondoc.core.annotation.ApiObjectField;

@ApiObject(name="location", show=false)
public class Location {

	@ApiObjectField(description="The population of the location")
	private Integer population;
	@ApiObjectField(description="The square km of the location")
	private Integer squarekm;

	public Integer getPopulation() {
		return population;
	}

	public Integer getSquarekm() {
		return squarekm;
	}

}</pre>
							</div>

							<div id="gettingstarted" class="tab-pane fade">
								<h2>Getting started</h2>
			<h3>1) Download core library</h3>
			<p>Download jsondoc-core, install it to your local maven repository or company artifactory and include it as a dependency in your project.</p>

<pre class="prettyprint linenums">
&lt;dependency&gt;
	&lt;groupId&gt;org.jsondoc&lt;/groupId&gt;
	&lt;artifactId&gt;jsondoc-core&lt;/artifactId&gt;
	&lt;version&gt;1.0.2&lt;/version&gt;
&lt;/dependency&gt;
</pre>

		<h3>2) Expose your documentation</h3>
		<p>After having annotated your code you need to create and expose your documentation. To do this you can build you own class using <code>JSONDocUtils.getApiDoc(servletContext, version, basePath);</code> or you can download, install and use the <code>jsondoc-springmvc</code> library. See <code>{2} generate</code> for more info on this.
		  
<pre class="prettyprint linenums">
&lt;dependency&gt;
	&lt;groupId&gt;org.jsondoc&lt;/groupId&gt;
	&lt;artifactId&gt;jsondoc-springmvc&lt;/artifactId&gt;
	&lt;version&gt;1.0.2&lt;/version&gt;
&lt;/dependency&gt;
</pre>

		<h3>3) Display the docs</h3>
		<p>This is optional, but you most probably want it. If you are using the jsondoc-springmvc library, your documentation will be at <code>/jsondoc</code>. Otherwise at the path you defined for your generation class. You may want to display the docs in a human readable way, and for his purpose you can use the <code>jsondoc-ui</code> project, which you can download from this website. Simply copy things under <code>src/main/webapps</code> to your project's webapps folder. Maybe you will need to modify some paths if you decide to put that stuff in a different location, but in any case everything is in the <code>&lt;head&gt;</code> of <code>jsondoc.jsp</code>. At this point you only have to point your browser to <code>http://localhost:8080/jsondoc.jsp</code> (or whatever path your server has), insert the <code>/jsondoc</code> path in the upper box, like for example <code>http://localhost:8080/api/jsondoc</code> and hit enter to see the documentation.</p>
							</div>

							<div id="downloads" class="tab-pane fade">
								<div class="row">
									<div class="span6">
										<h2>Downloads</h2>
										<table class="table table-bordered table-condensed">
											<tr><th style="width: 150px;">Project</th><th>Version</th><th>Description</th></tr>
											<tr><td><a href="static/jsondoc-core-1.0.2.tar.gz">jsondoc-core</a></td><td>1.0.1</td><td>This includes the set of annotations. Download only this if your web application is not using Spring MVC and you want to use your favourite MVC framework. Refer to <code>{1} annotate</code> for more info</td></tr>
											<tr><td><a href="static/jsondoc-springmvc-1.0.2.tar.gz">jsondoc-springmvc</a></td><td>1.0.1</td><td>Download this if you want to use the jsondoc controller to automatically generate json documentation. Refer to <code>{2} generate</code> for more info</td></tr>
											<tr><td><a href="static/jsondoc-ui-1.0.2.tar.gz">jsondoc-ui</a></td><td>1.0.1</td><td>Standard interface to display the generated documentation. Refer to <code>{3} display</code> for more info</td></tr>
										</table>
									</div>
									<div class="span3">
										<h2>Changelog</h2>
										<dl>
											<dt>Version 1.0.2</dt>
											<dd><a target="_blank" href="https://github.com/fabiomaffioletti/jsondoc/issues?labels=Task%2Cenhancement&milestone=2&page=1&state=closed">Removed the need of a servlet context</a> by letting the user specify which packages to scan</dd>
											<dd><a target="_blank" href="https://github.com/fabiomaffioletti/jsondoc/issues?labels=bug&milestone=2&page=1&state=closed">Some bug fixing</a> in jsondoc-ui and jsondoc-core</dd>
											<dd><a target="_blank" href="https://github.com/fabiomaffioletti/jsondoc/issues/9">Wilcard type checks</a> in ApiDocObjects generation</dd>
											<dt>Version 1.0.1</dt>
											<dd><a target="_blank" href="https://github.com/fabiomaffioletti/jsondoc/issues/2">Fixed bug</a> in jsondoc-ui </dd>
										</dl>
									</div>
								</div>
								<div class="row">
									<div class="span6">
										<h3>Previous versions</h3>
										<table class="table table-bordered table-condensed">
											<tr><th style="width: 150px;">Version</th><th>Download bundle <code>*</code></th></tr>
											<tr><td>1.0.1</td><td><a href="static/jsondoc-bundle-1.0.1.tar.gz">jsondoc-bundle-1.0.1</a></td></tr>
											<tr><td>1.0.0</td><td><a href="static/jsondoc-bundle-1.0.0.tar.gz">jsondoc-bundle-1.0.0</a></td></tr>
										</table>
										<p><code>*</code> The bundle contains jsondoc-core, jsondoc-springmvc and jsondoc-ui</p>
									</div>
								</div>
							</div>

						</div><!-- tab content -->

  					</div> <!-- span -->
  				</div> <!-- row -->
  			</section>

  			<footer>
  				JSONDoc is open source. <a href="https://github.com/fabiomaffioletti/jsondoc" target="blank">View project on github</a>
  			</footer>

			<script type="text/javascript">
				var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
			    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
			</script>
			<script type="text/javascript">
			    try {
			        var pageTracker = _gat._getTracker("UA-4918972-5");
			        pageTracker._trackPageview();
			    } catch(err) {}
			</script>

  	</body>
</html>